/*
Project:    SERVER + BROKER
Functions:  IoT (MQTT)
*/
//===========================================================
// MÃ“DULOS
//==========================================================
const express = require('express');
const app = express();
const cors = require('cors');
constmongoose = require('mongoose');
//const bodyParser = require('body-parser'); // Deprecated a partir de Express 4.1.16
const mqttBroker = require('./services/brokerEsp32');// mqtt Broker

//===========================================================
// CONSTANTES
//===========================================================
const PORT = process.env.PORT || 4000;
const HOST = '127.0.0.1';



//--------------------------------------------------------------------------------------------------------------------------------------------------------
// A.- Lanzamiento del SERVER
//--------------------------------------------------------------------------------------------------------------------------------------------------------
app.listen(PORT,HOST,()=>{
    console.log("Server OK");
})

//--------------------------------------------------------------------------------------------------------------------------------------------------------
// B.- Lanzar Broker
//--------------------------------------------------------------------------------------------------------------------------------------------------------
mqttBroker.startBroker();


